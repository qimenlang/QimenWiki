# 事件与消息泵

事件有两个过程：当事件发生时，需要**通知**关注该事件的对象；**事件处理**，安排对象回应发生的事件；

### 实现方案

1. 静态类型的函数绑定

   通知一个对象某事件发生，最简单的方法就是调用该对象的成员函数；该成员函数是虚函数，需要有一个基类声明该虚函数；

   带来的问题是，基类需要声明所有事件的虚函数，因此事件发生时所有的子类型对象都会被通知到，即便其对事件的处理是不做任何事情，影响效率；

   可以把函数调用封装成对象，并把对象传递到运行时的对象，以实现后期绑定的动态类型函数调用；

2. 事件封装成对象

   事件由两个部分组成：类型，参数；参数提供事件的细节；事件也可以称为消息、命令；

   把事件封装为对象的好处：

   - 单个事件处理函数： void onEvent(Event & e) 便可以处理所有事件；
   - 持久性：相比于函数调用之后直接离开作用域，事件对象更具有持久性，可存储于队列；
   - 可以转发事件：对象可以接收到事件之后不做处理直接转发给其他对象；

3. 

